let appRedirect;const getJSON=async e=>{try{const t=await fetch(e);if(!t.ok){const e=`An error has occured: ${t.status}`;throw new Error(e)}const n=await t.json();return n}catch(e){return e}},timerAndProgressBar=()=>{let e=!0;setTimeout(()=>{if(e){e=!1;let n=25,a=100;const r=document.getElementById("progress-bar"),s=document.getElementById("timeout");s.textContent=` ${n} sec.`;const i=setInterval(t,1e3);function t(){let t=a/n;n=Math.max(0,n-1),s.textContent=` ${n} sec.`,a<1?(clearInterval(i),e=!0,redirectTo(appRedirect)):(a-=t,r.style.width=a+"%")}}},100)},redirectTo=e=>{window.location.assign(e)};window.addEventListener("load",()=>{const e=document.getElementById("intro");getJSON("js/apps.json").then(t=>{e.innerHTML="";const n=t.langs,a=navigator.language||navigator.userLanguage;var r,s;switch(a){case"cs":r=n.cs.title,s=n.cs.countdown;break;default:r=n.en.title,s=n.en.countdown}if(e.insertAdjacentHTML("beforeBegin",`<h1>${r}</h1>\n            <p class="lead text-muted">${s}<span id="timeout"> 25 sec.</span></p>`),e.innerHTML+='\n        <div class="progress">\n            <div\n                class="progress-bar progress-bar-striped progress-bar-animated"\n                id="progress-bar"\n                role="progressbar"\n                aria-valuenow="100"\n                aria-valuemin="0"\n                aria-valuemax="100"\n                style="animation-direction: reverse; width: 100%"\n            >\n            </div>\n        </div>',1!=t.apps.length){for(let e=0;e<t.apps.length;e++){const n=t.apps[e],{title:r,icon:s,id:c,url:o}=n,{selected:d}=t,l=document.querySelector(".container .row");var i=n.description;switch(a){case"cs":i=n.description.cs;break;default:i=n.description.en}i||(i=n.description.en),d==c?(selectedApp=!0)&&(appRedirect=o):selectedApp=!1,l.innerHTML+=`\n            <div class="col mb-5">\n                <div class="card h-100 shadow-sm mr-auto ml-auto">\n                    <img class="bd-placeholder-img card-img-top p-5 border-bottom" src="${s}" alt="${r}" />\n                    <div class="card-body">\n                        <a \n                        href="${o}" \n                        title="${r} - ${i}" \n                        class="stretched-link d-inline-block" \n                        tabindex="${e+1}"\n                        >\n                            <h2 class="h3 text-dark d-inline align-middle card-name">${r}</h2>\n                        </a>\n                        ${selectedApp?"<span class='badge badge-primary align-middle'>default</span>":""}  \n                        <p class="card-text text-truncate">\n                            ${i}\n                        </p>\n                    </div>\n                </div>\n            </div>`}timerAndProgressBar()}else redirectTo(t.apps[0].url)}).catch(e=>{console.error(e.message)})});