let appRedirect;const getJSON=async e=>{try{const n=await fetch(e);if(!n.ok){const e=`An error has occured: ${n.status}`;throw new Error(e)}const t=await n.json();return t}catch(e){return e}},timerAndProgressBar=()=>{let e=!0;setTimeout(()=>{if(e){e=!1;let t=25,s=100;const r=document.getElementById("progress-bar"),a=document.getElementById("timeout");a.textContent=` ${t} sec.`;const i=setInterval(n,1e3);function n(){let n=s/t;t=Math.max(0,t-1),a.textContent=` ${t} sec.`,s<1?(clearInterval(i),e=!0,redirectTo(appRedirect)):(s-=n,r.style.width=s+"%")}}},100)},redirectTo=e=>{window.location.assign(e)},handleKeyPress=(e,n)=>{13==e.keyCode&&(e.preventDefault(),redirectTo(n))};window.addEventListener("load",()=>{const e=document.getElementById("intro");getJSON("js/apps.json").then(n=>{e.innerHTML="";const t=n.langs,s=navigator.language||navigator.userLanguage;let r,a;switch(s){case"cs":r=t.cs.title,a=t.cs.countdown;break;default:r=t.en.title,a=t.en.countdown}if(e.insertAdjacentHTML("beforeBegin",`\n                <h1>${r}</h1>\n                <p class="lead text-muted">\n                    ${a}\n                    <span id="timeout"> 25 sec.</span>\n                </p>`),e.innerHTML+='\n                <div class="progress">\n                    <div\n                        class="progress-bar progress-bar-striped progress-bar-animated"\n                        id="progress-bar"\n                        role="progressbar"\n                        aria-valuenow="100"\n                        aria-valuemin="0"\n                        aria-valuemax="100"\n                        style="animation-direction: reverse; width: 100%"\n                    >\n                    </div>\n                </div>',1!=n.apps.length){for(let e=0;e<n.apps.length;e++){const t=document.querySelector(".container .row"),r=n.apps[e];let a=r.description;const{title:i,icon:o,id:c,url:d}=r,{selected:l}=n;switch(s){case"cs":a=r.description.cs;break;default:a=r.description.en}a||(a=r.description.en),l==c?(selectedApp=!0)&&(appRedirect=d):selectedApp=!1,t.innerHTML+=`\n                    <div class="col mb-5">\n                        <div \n                            class="card h-100 shadow-sm mr-auto ml-auto" \n                            tabindex="${e+1}" \n                            onclick="window.location.href='${d}';" \n                            onkeypress="handleKeyPress(event, '${d}')"\n                            title="${i} - ${a}"\n                        >\n                            <img class="bd-placeholder-img card-img-top p-5 border-bottom" src="${o}" alt="${i}" />\n                            <div class="card-body">\n                                <h2 class="h3 text-dark d-inline align-middle card-name">${i}</h2>\n                                ${selectedApp?"<span class='badge badge-primary align-middle'>default</span>":""}  \n                                <p class="card-text text-truncate">\n                                    ${a}\n                                </p>\n                            </div>\n                        </div>\n                    </div>`}timerAndProgressBar()}else redirectTo(n.apps[0].url)}).catch(e=>{console.error(e.message)})});