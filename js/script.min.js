const intro=document.getElementById("intro"),progressBar=document.getElementById("progress-bar");let appRedirect;window.onload=(()=>{let e=!0;setTimeout(()=>{if(e){e=!1;let n=25,a=100;const s=document.getElementById("progress-bar"),c=document.getElementById("timeout");c.textContent=` ${n} sec.`;const r=setInterval(t,1e3);function t(){let t=a/n;n=Math.max(0,n-1),c.textContent=` ${n} sec.`,a<1?(clearInterval(r),e=!0,redirectTo(appRedirect)):(a-=t,s.style.width=a+"%")}}},100)});const redirectTo=e=>{window.location.assign(e)},getJSON=async e=>{try{const t=await fetch(e);if(!t.ok)throw new Error(t.statusText);const n=await t.json();return n}catch(e){return e}};getJSON("js/apps.json").then(e=>{const t=e.langs,n=navigator.language||navigator.userLanguage;var a,s;switch(n){case"cs":a=t.cs.title,s=t.cs.countdown;break;default:a=t.en.title,s=t.en.countdown}intro.insertAdjacentHTML("beforeBegin",`<h1>${a}</h1>\n            <p class="lead text-muted">${s}<span id="timeout"></span></p>`);for(let t=0;t<e.apps.length;t++){const a=e.apps[t],{title:s,icon:r,id:o,url:d}=a,{selected:i}=e,l=document.querySelector(".container .row");var c=a.description;switch(n){case"cs":c=a.description.cs;break;default:c=a.description.en}i==o?(selectedApp=!0)&&(appRedirect=d):selectedApp=!1,l.innerHTML+=`\n            <div class="col mb-5">\n                <div class="card h-100 shadow-sm mr-auto ml-auto">\n                    <img class="bd-placeholder-img card-img-top p-4 border-bottom" height="310" src="${r}" alt="${s}" />\n                    <div class="card-body">\n                        <a \n                        href="${d}" \n                        title="${s} - ${c}" \n                        class="stretched-link" \n                        tabindex="${t+1}"\n                        >\n                            <h2 class="h3 text-dark d-inline-block align-middle card-name">${s}</h2>\n                        </a>\n                        ${selectedApp?"<span class='badge badge-primary ml-1 mb-1 align-middle'>default</span>":""}  \n                        <p class="card-text text-truncate">\n                            ${c}\n                        </p>\n                    </div>\n                </div>\n            </div>`}}).catch(e=>{console.error(e)});